import socket
import sys

from colorama import *

class Exploit:

	config={
		"LHOST":"127.0.0.1",
		"LPORT":"4444"
	}
	def show_options(self):
		print(Fore.YELLOW+"Options"+Style.RESET_ALL)
		print(Fore.YELLOW+"-------"+Style.RESET_ALL)
		for key in sorted(self.config.keys()):
			print(Fore.YELLOW+key, self.get_config(key)+Style.RESET_ALL)
	


	
	def set_config(self, key, value):
		if key in self.config.keys():
			self.config[key] = value
		else:
			print("No options")
	
	
	def get_config(self, key):
		return self.config[key]

	def show_info(self):
		print(Fore.YELLOW+"This is not an exploit it listens to a port"+Style.RESET_ALL)

	def run(self):
		sock=socket.socket()

		try:
			sock.bind((self.config["LHOST"], int(self.config["LPORT"])))
		    
		except socket.error as msg:
		    print("Bind failed. Error Code : " + str(msg[0]) + " Message " + msg[1])
		    sys.exit()
		
		print(Fore.BLUE+"[*] "+Style.RESET_ALL+"Listening on {}:{}".format(self.config["LHOST"],self.config["LPORT"]))
		sock.listen(1)
		conn, addr = sock.accept()
		print('Connected with ' + addr[0] + ':' + str(addr[1]))
