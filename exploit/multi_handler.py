import socket
import sys

from colorama import *

class Exploit:

	config={
	}
	def show_options(self):
		print(Fore.YELLOW+"Options\t\tNecessity\t\tDefault"+Style.RESET_ALL)
		print(Fore.YELLOW+"-------\t\t---------\t\t-------"+Style.RESET_ALL)
		for key in sorted(self.config.keys()):
			print(Fore.YELLOW+"%s\t\t%s\t\t\t%s" % (
				key, self.config[key]["necessity"], self.get_config(key))+Style.RESET_ALL)
	

	@staticmethod
	def show_info():
		print(Fore.YELLOW+"\nOpens Listening Port"+Style.RESET_ALL)

	
	def set_config(self, key, value):
		if key in self.config.keys():
			self.config[key]["default"] = value
		else:
			print("No options")
	
	
	def get_config(self, key):
		return self.config[key]["default"]

	@staticmethod
	def run():
		LHOST=input("LHOST> ")
		LPORT=int(input("LPORT> "))
		
		sock=socket.socket()

		try:
			sock.bind((LHOST, LPORT))
		    
		except socket.error as msg:
		    print("Bind failed. Error Code : " + str(msg[0]) + " Message " + msg[1])
		    sys.exit()
		
		print(Fore.BLUE+"[*] "+Style.RESET_ALL+"Listening on {}:{}".format(LHOST,LPORT))
		sock.listen(1)
		conn, addr = sock.accept()
		print('Connected with ' + addr[0] + ':' + str(addr[1]))
